# HolisticOS Production Environment Configuration Template
# Copy this file to .env and fill in your actual values
# NEVER commit the actual .env file to version control

# =============================================================================
# CRITICAL SECURITY CONFIGURATION
# =============================================================================

# Environment Configuration
# Options: development, staging, production
ENVIRONMENT=production

# Logging Configuration
# Options: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# PostgreSQL Database Connection
# Format: postgresql://username:password@hostname:port/database
DATABASE_URL=postgresql://user:password@hostname:5432/database

# Supabase Configuration (if using Supabase)
SUPABASE_URL=https://your-project-id.supabase.co
SUPABASE_KEY=your_supabase_anonymous_key_here
SUPABASE_SERVICE_KEY=your_supabase_service_role_key_here

# Alternative Supabase naming (for calendar integration)
# Use these if you have separate Supabase projects
SUPABASE_CAL_URL=https://your-calendar-project.supabase.co
SUPABASE_CAL_ANON_KEY=your_calendar_supabase_anonymous_key
SUPABASE_CAL_SERVICE_KEY=your_calendar_supabase_service_key

# =============================================================================
# OPENAI CONFIGURATION
# =============================================================================

# OpenAI API Key (Required for AI functionality)
# Get from: https://platform.openai.com/api-keys
# Used for: o3 model (behavior + circadian analysis)
OPENAI_API_KEY=sk-your-openai-api-key-here

# OpenAI Request Configuration
OPENAI_REQUEST_TIMEOUT=30
OPENAI_MAX_RETRIES=3
OPENAI_RETRY_DELAY=1.0

# =============================================================================
# SAHHA CONFIGURATION (Required for Direct Health Data Integration)
# =============================================================================

# Sahha API Base URL
SAHHA_API_BASE_URL=https://api.sahha.ai

# Sahha Client Credentials (for Admin API access)
# Get from: Sahha Dashboard → API Credentials → Client ID & Secret
# NOTE: Use Client ID/Secret (NOT Application ID/Secret)
# Client credentials are for ADMIN API to fetch user health data
SAHHA_CLIENT_ID=your_sahha_client_id_here
SAHHA_CLIENT_SECRET=your_sahha_client_secret_here

# Enable/Disable Sahha Direct Fetch
# Set to "true" to use Sahha direct integration
# Set to "false" to use Supabase data only (fallback mode)
USE_SAHHA_DIRECT=true

# Sahha Optional Configuration
SAHHA_RATE_LIMIT_DELAY=0.5
SAHHA_MAX_RETRIES=3
SAHHA_REQUEST_TIMEOUT=30

# =============================================================================
# REDIS CONFIGURATION (Optional - for rate limiting and caching)
# =============================================================================

# Redis Connection URL
REDIS_URL=redis://localhost:6379

# Redis Configuration
REDIS_MAX_CONNECTIONS=20
REDIS_RETRY_ON_TIMEOUT=true

# =============================================================================
# API CONFIGURATION
# =============================================================================

# Server Configuration
PORT=8000
HOST=0.0.0.0

# Render.com Configuration (if deploying to Render)
RENDER=false

# =============================================================================
# WELL-PLANNED API CONFIGURATION (Calendar Integration)
# =============================================================================

# Well-Planned API URL (for Google Calendar integration)
WELL_PLANNED_API_URL=https://well-planned-api.onrender.com

# Authentication: Uses Supabase JWT token (passed per-request, not in env)
# The token comes from the user's Supabase session and is forwarded to well-planned-api

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================

# CORS Allowed Origins (comma-separated)
# For production, specify your exact domains
# For development, you can include localhost
ALLOWED_ORIGINS=https://yourdomain.com,https://www.yourdomain.com

# API Security
API_KEY_HEADER=X-API-Key
API_KEY=your_api_key_here

# =============================================================================
# RATE LIMITING CONFIGURATION
# =============================================================================

# Rate Limiting (requests per hour)
RATE_LIMIT_FREE_TIER=5
RATE_LIMIT_PREMIUM_TIER=20
RATE_LIMIT_COST_DAILY=1.00

# OpenAI Cost Protection
MAX_DAILY_COST_USD=10.00
COST_ALERT_THRESHOLD_USD=8.00

# =============================================================================
# TIMEOUT CONFIGURATION
# =============================================================================

# Database Timeouts (seconds)
DATABASE_QUERY_TIMEOUT=30
DATABASE_CONNECTION_TIMEOUT=10

# Analysis Timeouts (seconds)
BEHAVIOR_ANALYSIS_TIMEOUT=120
NUTRITION_ANALYSIS_TIMEOUT=90
ROUTINE_ANALYSIS_TIMEOUT=90

# =============================================================================
# EMAIL/ALERTING CONFIGURATION
# =============================================================================

# Email Provider Configuration (using Resend)
EMAIL_PROVIDER=resend
EMAIL_API_KEY=your_resend_api_key_here

# Alert Email Settings
ALERT_EMAIL_FROM=alerts@yourdomain.com
ALERT_EMAIL_RECIPIENTS=admin@yourdomain.com,alerts@yourdomain.com

# =============================================================================
# MONITORING CONFIGURATION
# =============================================================================

# Health Check Configuration
HEALTH_CHECK_INTERVAL=60
HEALTH_CHECK_TIMEOUT=10

# Metrics Collection
ENABLE_METRICS=true
METRICS_PORT=9090

# =============================================================================
# DEVELOPMENT OVERRIDES (Remove in production)
# =============================================================================

# Development-only settings (comment out for production)
# DEBUG_MODE=false
# ENABLE_CORS_DEVELOPMENT=false
# LOG_SQL_QUERIES=false