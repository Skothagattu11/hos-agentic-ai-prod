# =============================================================================
# HolisticOS Environment Configuration
# =============================================================================
# Copy this file to .env and fill in your values
# Change ENVIRONMENT to "development" or "production" as needed

# -----------------------------------------------------------------------------
# CRITICAL: Environment Mode
# -----------------------------------------------------------------------------
# Controls system behavior - MUST be set correctly!
# Options: development, staging, production
ENVIRONMENT=development

# -----------------------------------------------------------------------------
# Core Services Configuration
# -----------------------------------------------------------------------------

# Supabase Configuration (Required)
SUPABASE_URL=https://your-project-id.supabase.co
SUPABASE_KEY=your_supabase_anon_key_here

# OpenAI Configuration (Required)
OPENAI_API_KEY=sk-proj-your-openai-api-key-here

# -----------------------------------------------------------------------------
# Database Configuration
# -----------------------------------------------------------------------------
# Note: System automatically handles connection based on ENVIRONMENT setting
# - Development: Falls back to Supabase client if IPv6 URL detected (WSL2 fix)
# - Production: Always uses connection pool

# Option 1: Direct connection (IPv6 - works in production, not WSL2)
DATABASE_URL=postgresql://postgres:password@db.project-id.supabase.co:5432/postgres

# Option 2: Pooler connection (IPv4 - works everywhere, recommended for production)
# DATABASE_URL=postgresql://postgres.project-id:password@aws-0-region.pooler.supabase.com:5432/postgres

# Redis Configuration (Optional - mainly for production)
# REDIS_URL=redis://localhost:6379

# -----------------------------------------------------------------------------
# Logging and Monitoring
# -----------------------------------------------------------------------------
LOG_LEVEL=INFO  # Options: DEBUG, INFO, WARNING, ERROR, CRITICAL

# -----------------------------------------------------------------------------
# Server Configuration
# -----------------------------------------------------------------------------
PORT=8000

# -----------------------------------------------------------------------------
# Email Alerting Configuration (Optional)
# -----------------------------------------------------------------------------
# EMAIL_API_KEY=your_resend_api_key_here
# EMAIL_PROVIDER=resend
# ALERT_EMAIL_FROM=alerts@yourdomain.com
# ALERT_EMAIL_RECIPIENTS=admin@yourdomain.com,team@yourdomain.com

# -----------------------------------------------------------------------------
# Performance Tuning (Optional - uses smart defaults if not set)
# -----------------------------------------------------------------------------
# Timeout Configuration (in seconds)
# OPENAI_REQUEST_TIMEOUT=30      # Default: 30 (dev), 60 (prod)
# DATABASE_QUERY_TIMEOUT=30       # Default: 30
# BEHAVIOR_ANALYSIS_TIMEOUT=120   # Default: 120 (dev), 180 (prod)

# Rate Limiting Configuration
# RATE_LIMIT_FREE_TIER=5          # Requests per hour for free tier
# RATE_LIMIT_COST_DAILY=1.00      # Daily cost limit in USD

# Database Pool Configuration (Advanced - rarely need to change)
# DATABASE_POOL_MIN_SIZE=2        # Min connections (default: 1 dev, 5 prod)
# DATABASE_POOL_MAX_SIZE=8        # Max connections (default: 5 dev, 20 prod)
# DATABASE_MAX_QUERIES=1000       # Queries before connection recycle
# DATABASE_MAX_IDLE_TIME=300      # Seconds before idle connection closes

# -----------------------------------------------------------------------------
# Development vs Production Quick Reference
# -----------------------------------------------------------------------------
# DEVELOPMENT:
#   - Set ENVIRONMENT=development
#   - Database: Automatically uses Supabase client fallback if needed
#   - Debug endpoints: Enabled
#   - Logging: Detailed (INFO level)
#   - Timeouts: Lower for faster iteration
#
# PRODUCTION:
#   - Set ENVIRONMENT=production
#   - Database: Always uses connection pool
#   - Debug endpoints: Disabled
#   - Logging: Minimal (WARNING level by default)
#   - Timeouts: Higher for reliability
#
# To switch between environments, just change ENVIRONMENT value!
# -----------------------------------------------------------------------------